CREATE DATABASE material;
CREATE TABLE users
(
id int NOT NULL,
student_number bigint,
privilege char(5),
name char(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
PRIMARY KEY (id)
);
CREATE TABLE materials
(
id int NOT NULL AUTO_INCREMENT,
file longblob NOT NULL,
name char(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
uploader_id int,
time date,
comments char(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci,
PRIMARY KEY (id)
);
CREATE TABLE tags
(
id int NOT NULL AUTO_INCREMENT,
name char(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
PRIMARY KEY (id)
);
CREATE TABLE material_tag
(
id int NOT NULL AUTO_INCREMENT,
material_id int,
tag_id int,
PRIMARY KEY (id),
FOREIGN KEY (material_id) REFERENCES materials(id),
FOREIGN KEY (tag_id) REFERENCES tags(id)
);
CREATE TABLE material_user
(
id int NOT NULL AUTO_INCREMENT,
material_id int,
user_id int,
PRIMARY KEY (id),
FOREIGN KEY (material_id) REFERENCES materials(id),
FOREIGN KEY (user_id) REFERENCES users(id)
);
